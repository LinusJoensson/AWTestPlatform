@model ImportVM

<h1>Import Questions</h1>
<div class="row whiteSquare">
    <div class="col-md-6">
        <h3>All tests</h3>
        <div id="allTestsDiv">
        </div>
    </div>
    <div class="col-md-6 ">
        <h3>Current test</h3>
        <div id="currentTestDiv">
        </div>
    </div>
</div>

<input type="button" value="Copy Selected To Test" id="copySelectedButton" />
<input type="button" value="Delete Selected From Test" id="deleteSelectedButton" />

<button class="orcaBtn topMargin-8 rightMargin10 onTheLine"
        onclick="testTree()"
        style="float:right">
    Test
</button>

@section script
{
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/jstree.min.js"></script>

    <script type="text/javascript">

        function testTree()
        {
            var selectedElmsIds = [];
            var selectedElms = $('#allTestsDiv').jstree("get_selected", true);
            $.each(selectedElms, function() {
                selectedElmsIds.push(this.Id);
            });

            alert(selectedElmsIds.join(","));
        }
        //----------------------

        $(document).ready(function()
        {
            $.get("/Admin/GetImportData",
                { id: @Model.TestId },
                function(data) {
                    var allTestsData = data.allTestsData;
                    var currentTestData = data.currentTestData;

                    $('#allTestsDiv').jstree(
                        { 'core' : {
                            'data' : allTestsData,
                        },
                            'plugins' : [
                                    'checkbox',
                                    "search"
                            ]
                        });

                    $('#currentTestDiv').jstree(
                       { 'core' : {
                           'data' : currentTestData,
                       },
                           'plugins' : [
                                   'checkbox'
                           ]});
                });
        });
    </script>
}
