@model QuestionFormVM

@if (!Model.IsInTestSession)
{
    <style>
        .panel {
            background-color: #EEEEEE;
        }
    </style>
}

@if (Model != null)
{
<div class="panel panel-primary">
    <div class="panel-heading">
        @if (!Model.IsInTestSession)
        {
            <h3>Preview</h3>
        }
    </div>

    <div class="panel-body">
        @(Html.Raw(Model.QuestionText))

        <hr/>

        @if (Model.Answers != null && Model.Answers.Count > 0)
        {
        @foreach (var answer in Model.Answers)
        {
            <div class="form-group">
                @switch (Model.QuestionType)
                {
                    case TestPlatform.Models.Enums.QuestionType.SingleChoice:
                        {
                            <label for="@($"answer{answer.AnswerId}")">

                                <input type="radio"
                                        id="@string.Format("answer{0}", answer.AnswerId)"
                                        name="@nameof(Model.SelectedAnswers)"
                                        value="@answer.AnswerId"
                                        @(answer.IsChecked ? "checked=\"checked\"" : "") />

                                @(Html.Raw(answer.AnswerText))

                            </label>

                        }
                        break;
                    case TestPlatform.Models.Enums.QuestionType.MultipleChoice:
                        {
                            <label for="@($"answer{answer.AnswerId}")">
                                @if (answer.IsChecked)
                                {
                                    <input type="checkbox"
                                            id="@($"answer{answer.AnswerId}")"
                                            name="@nameof(Model.SelectedAnswers)"
                                            value="@answer.AnswerId"
                                            checked="checked" />
                                }
                                else
                                {
                                    <input type="checkbox"
                                            id="@($"answer{answer.AnswerId}")"
                                            name="@nameof(Model.SelectedAnswers)"
                                            value="@answer.AnswerId" />
                                }
                                @(Html.Raw(answer.AnswerText))

                            </label>

                        }
                        break;


                }
                <hr />

            </div>
            }

        }
        else if (Model.QuestionType == TestPlatform.Models.Enums.QuestionType.TextMultiLine)
        {
            @if (!Model.IsInTestSession)
            {
                <div class="form-group">
                    <label>Answer:</label>
                    <textarea class="form-control" rows="5" readonly></textarea>
                </div>
            }
            else
            {
                <div class="form-group">
                    <label>Answer:</label>

                    <textarea class="form-control" rows="5"
                                name="@nameof(Model.SelectedAnswers)"></textarea>
                </div>
            }
        }
        else if (Model.QuestionType == TestPlatform.Models.Enums.QuestionType.TextSingleLine)
        {
            @if (!Model.IsInTestSession)
            {
                <div class="form-group">
                    <label>Answer:</label>
                    <text class="form-control" readonly></text>
                </div>
            }
            else
            {
                <div class="form-group">
                    <label>Answer:</label>

                    <text class="form-control" name="@nameof(Model.SelectedAnswers)"></text>
                </div>
            }
        }
        else
        {
            <p>No answers added</p>
        }

        @if (Model.HasComment)
        {
            @if (Model.IsInTestSession)
            {
                <div class="form-group">
                    <label>Comment:</label>
                    <textarea asp-for="Comment" class="form-control" rows="5"></textarea>
                </div>
            }
            else
            {
                <div class="form-group">
                    <label>Comment:</label>
                    <textarea class="form-control" rows="5" readonly></textarea>
                </div>
            }
        }
    </div>
</div>
}
